<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Filtering GTFS feeds</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Filtering GTFS feeds</h1>



<p>GTFS feeds are often used to describe very large and complex public
transport networks. These large files can become quite cumbersome to
use, manipulate and move around, and it’s not unfrequent that one wants
to analyze a specific subset of the data.</p>
<p><strong>gtfstools</strong> includes a few functions to filter GTFS
feeds, thus allowing for faster and more convenient data processing. The
filtering functions currently available are:</p>
<ul>
<li><code>filter_by_agency_id()</code></li>
<li><code>filter_by_route_id()</code></li>
<li><code>filter_by_service_id()</code></li>
<li><code>filter_by_shape_id()</code></li>
<li><code>filter_by_stop_id()</code></li>
<li><code>filter_by_trip_id()</code></li>
<li><code>filter_by_route_type()</code></li>
<li><code>filter_by_weekday()</code></li>
<li><code>filter_by_time_of_day()</code></li>
<li><code>filter_by_sf()</code></li>
</ul>
<p>This vignette will introduce you to these functions and will cover
their usage in detail.</p>
<p>We will start by loading the packages required by this demonstration
into the current <strong>R</strong> session:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(gtfstools)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">#&gt; Warning: package &#39;ggplot2&#39; was built under R version 4.2.3</span></span></code></pre></div>
<div id="filtering-by-agency_id-route_id-service_id-shape_id-stop_id-trip_id-or-route_type" class="section level1">
<h1>Filtering by <code>agency_id</code>, <code>route_id</code>,
<code>service_id</code>, <code>shape_id</code>, <code>stop_id</code>,
<code>trip_id</code> or <code>route_type</code>:</h1>
<p>The first six work in a very similar fashion. You specify a vector of
identifiers, and the function keeps (or drops, as we’ll see soon) all
the entries that are in any way related to this id. Let’s see how that
works using <code>filter_by_trip_id()</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata/spo_gtfs.zip&quot;</span>, <span class="at">package =</span> <span class="st">&quot;gtfstools&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>gtfs <span class="ot">&lt;-</span> <span class="fu">read_gtfs</span>(path)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">object.size</span>(gtfs)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#&gt; 811304 bytes</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="fu">head</span>(gtfs<span class="sc">$</span>trips[, .(trip_id, trip_headsign, shape_id)])</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt;       trip_id trip_headsign shape_id</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;        &lt;char&gt;   &lt;char&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; 1: CPTM L07-0       JUNDIAI    17846</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt; 2: CPTM L07-1           LUZ    17847</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt; 3: CPTM L08-0  AMADOR BUENO    17848</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">#&gt; 4: CPTM L08-1 JULIO PRESTES    17849</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt; 5: CPTM L09-0        GRAJAU    17850</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt; 6: CPTM L09-1        OSASCO    17851</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co"># keeping trips CPTM L07-0 and CPTM L07-1</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_trip_id</span>(gtfs, <span class="fu">c</span>(<span class="st">&quot;CPTM L07-0&quot;</span>, <span class="st">&quot;CPTM L07-1&quot;</span>))</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">object.size</span>(smaller_gtfs)</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">#&gt; 71592 bytes</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="fu">head</span>(smaller_gtfs<span class="sc">$</span>trips[, .(trip_id, trip_headsign, shape_id)])</span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">#&gt;       trip_id trip_headsign shape_id</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;        &lt;char&gt;   &lt;char&gt;</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co">#&gt; 1: CPTM L07-0       JUNDIAI    17846</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co">#&gt; 2: CPTM L07-1           LUZ    17847</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="fu">unique</span>(smaller_gtfs<span class="sc">$</span>shapes<span class="sc">$</span>shape_id)</span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="co">#&gt; [1] &quot;17846&quot; &quot;17847&quot;</span></span></code></pre></div>
<p>We can see from the code snippet above that the function not only
filters the <code>trips</code> table, but all other tables that contain
a key that can be identified via its relation to <code>trip_id</code>.
For example, since the trips <code>CPTM L07-0</code> and
<code>CPTM L07-1</code> are described by the shapes <code>17846</code>
and <code>17847</code>, respectively, these are the only shapes kept in
<code>smaller_gtfs</code>.</p>
<p>The function also supports the opposite behaviour: instead of keeping
the entries related to the specified identifiers, you can <em>drop</em>
them. To do that, set the <code>keep</code> argument to
<code>FALSE</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># dropping trips CPTM L07-0 and CPTM L07-1</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_trip_id</span>(</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>    gtfs,</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;CPTM L07-0&quot;</span>, <span class="st">&quot;CPTM L07-1&quot;</span>),</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="at">keep =</span> <span class="cn">FALSE</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">object.size</span>(smaller_gtfs)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">#&gt; 762576 bytes</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="fu">head</span>(smaller_gtfs<span class="sc">$</span>trips[, .(trip_id, trip_headsign, shape_id)])</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="co">#&gt;       trip_id       trip_headsign shape_id</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;              &lt;char&gt;   &lt;char&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">#&gt; 1: CPTM L08-0        AMADOR BUENO    17848</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">#&gt; 2: CPTM L08-1       JULIO PRESTES    17849</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co">#&gt; 3: CPTM L09-0              GRAJAU    17850</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co">#&gt; 4: CPTM L09-1              OSASCO    17851</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co">#&gt; 5: CPTM L10-0 RIO GRANDE DA SERRA    17852</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="co">#&gt; 6: CPTM L10-1                BRÁS    17853</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">unique</span>(smaller_gtfs<span class="sc">$</span>shapes<span class="sc">$</span>shape_id))</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="co">#&gt; [1] &quot;17848&quot; &quot;17849&quot; &quot;17850&quot; &quot;17851&quot; &quot;17852&quot; &quot;17853&quot;</span></span></code></pre></div>
<p>And the specified trips (and their respective shapes as well) are
nowhere to be seen. Please note that, since we are keeping many more
entries in the second case, the resulting GTFS object, though smaller
than the original, is much larger than in the first case.</p>
<p>The same logic demonstrated with <code>filter_by_trip_id()</code>
applies to the functions that filter feeds by <code>agency_id</code>,
<code>route_id</code>, <code>service_id</code>, <code>shape_id</code>,
<code>stop_id</code> and <code>route_type</code>.</p>
</div>
<div id="filtering-by-day-of-the-week-or-time-of-the-day" class="section level1">
<h1>Filtering by day of the week or time of the day:</h1>
<p>Frequently enough one wants to analyze service levels on certain days
of the week or during different times of the day. The functions
<code>filter_by_weekday()</code> and
<code>filter_by_time_of_day()</code> can be used to this purpose.</p>
<p>The first one takes the days of the week you want to keep/drop and
also includes a <code>combine</code> argument that controls how
multi-day filters work. Let’s see how that works with a few
examples:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># keeping entries related to services than run on saturdays AND sundays</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_weekday</span>(</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  gtfs,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="at">weekday =</span> <span class="fu">c</span>(<span class="st">&quot;saturday&quot;</span>, <span class="st">&quot;sunday&quot;</span>),</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="at">combine =</span> <span class="st">&quot;and&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>)</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>smaller_gtfs<span class="sc">$</span>calendar[, <span class="fu">c</span>(<span class="st">&quot;service_id&quot;</span>, <span class="st">&quot;sunday&quot;</span>, <span class="st">&quot;saturday&quot;</span>)]</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt;    service_id sunday saturday</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;  &lt;int&gt;    &lt;int&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; 1:        USD      1        1</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; 2:        _SD      1        1</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt; 3:        USD      1        1</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; 4:        _SD      1        1</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co"># keeping entries related to services than run EITHER on saturdays OR on sundays</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_weekday</span>(</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>  gtfs,</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>  <span class="at">weekday =</span> <span class="fu">c</span>(<span class="st">&quot;sunday&quot;</span>, <span class="st">&quot;saturday&quot;</span>),</span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>  <span class="at">combine =</span> <span class="st">&quot;or&quot;</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>)</span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>smaller_gtfs<span class="sc">$</span>calendar[, <span class="fu">c</span>(<span class="st">&quot;service_id&quot;</span>, <span class="st">&quot;sunday&quot;</span>, <span class="st">&quot;saturday&quot;</span>)]</span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co">#&gt;     service_id sunday saturday</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="co">#&gt;         &lt;char&gt;  &lt;int&gt;    &lt;int&gt;</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="co">#&gt;  1:        USD      1        1</span></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a><span class="co">#&gt;  2:        US_      0        1</span></span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a><span class="co">#&gt;  3:        _SD      1        1</span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a><span class="co">#&gt;  4:        __D      1        0</span></span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a><span class="co">#&gt;  5:        _S_      0        1</span></span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a><span class="co">#&gt;  6:        USD      1        1</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a><span class="co">#&gt;  7:        US_      0        1</span></span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a><span class="co">#&gt;  8:        _SD      1        1</span></span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a><span class="co">#&gt;  9:        __D      1        0</span></span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a><span class="co">#&gt; 10:        _S_      0        1</span></span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a></span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a><span class="co"># dropping entries related to services that run on saturdaus AND sundays</span></span>
<span id="cb4-36"><a href="#cb4-36" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_weekday</span>(</span>
<span id="cb4-37"><a href="#cb4-37" tabindex="-1"></a>  gtfs,</span>
<span id="cb4-38"><a href="#cb4-38" tabindex="-1"></a>  <span class="at">weekday =</span> <span class="fu">c</span>(<span class="st">&quot;saturday&quot;</span>, <span class="st">&quot;sunday&quot;</span>),</span>
<span id="cb4-39"><a href="#cb4-39" tabindex="-1"></a>  <span class="at">combine =</span> <span class="st">&quot;and&quot;</span>,</span>
<span id="cb4-40"><a href="#cb4-40" tabindex="-1"></a>  <span class="at">keep =</span> <span class="cn">FALSE</span></span>
<span id="cb4-41"><a href="#cb4-41" tabindex="-1"></a>)</span>
<span id="cb4-42"><a href="#cb4-42" tabindex="-1"></a>smaller_gtfs<span class="sc">$</span>calendar[, <span class="fu">c</span>(<span class="st">&quot;service_id&quot;</span>, <span class="st">&quot;sunday&quot;</span>, <span class="st">&quot;saturday&quot;</span>)]</span>
<span id="cb4-43"><a href="#cb4-43" tabindex="-1"></a><span class="co">#&gt;    service_id sunday saturday</span></span>
<span id="cb4-44"><a href="#cb4-44" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;  &lt;int&gt;    &lt;int&gt;</span></span>
<span id="cb4-45"><a href="#cb4-45" tabindex="-1"></a><span class="co">#&gt; 1:        U__      0        0</span></span>
<span id="cb4-46"><a href="#cb4-46" tabindex="-1"></a><span class="co">#&gt; 2:        US_      0        1</span></span>
<span id="cb4-47"><a href="#cb4-47" tabindex="-1"></a><span class="co">#&gt; 3:        __D      1        0</span></span>
<span id="cb4-48"><a href="#cb4-48" tabindex="-1"></a><span class="co">#&gt; 4:        _S_      0        1</span></span>
<span id="cb4-49"><a href="#cb4-49" tabindex="-1"></a><span class="co">#&gt; 5:        U__      0        0</span></span>
<span id="cb4-50"><a href="#cb4-50" tabindex="-1"></a><span class="co">#&gt; 6:        US_      0        1</span></span>
<span id="cb4-51"><a href="#cb4-51" tabindex="-1"></a><span class="co">#&gt; 7:        __D      1        0</span></span>
<span id="cb4-52"><a href="#cb4-52" tabindex="-1"></a><span class="co">#&gt; 8:        _S_      0        1</span></span>
<span id="cb4-53"><a href="#cb4-53" tabindex="-1"></a></span>
<span id="cb4-54"><a href="#cb4-54" tabindex="-1"></a><span class="co"># dropping entries related to services than run EITHER on saturdays OR on</span></span>
<span id="cb4-55"><a href="#cb4-55" tabindex="-1"></a><span class="co"># sundays</span></span>
<span id="cb4-56"><a href="#cb4-56" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_weekday</span>(</span>
<span id="cb4-57"><a href="#cb4-57" tabindex="-1"></a>  gtfs,</span>
<span id="cb4-58"><a href="#cb4-58" tabindex="-1"></a>  <span class="at">weekday =</span> <span class="fu">c</span>(<span class="st">&quot;sunday&quot;</span>, <span class="st">&quot;saturday&quot;</span>),</span>
<span id="cb4-59"><a href="#cb4-59" tabindex="-1"></a>  <span class="at">combine =</span> <span class="st">&quot;or&quot;</span>,</span>
<span id="cb4-60"><a href="#cb4-60" tabindex="-1"></a>  <span class="at">keep =</span> <span class="cn">FALSE</span></span>
<span id="cb4-61"><a href="#cb4-61" tabindex="-1"></a>)</span>
<span id="cb4-62"><a href="#cb4-62" tabindex="-1"></a>smaller_gtfs<span class="sc">$</span>calendar[, <span class="fu">c</span>(<span class="st">&quot;service_id&quot;</span>, <span class="st">&quot;sunday&quot;</span>, <span class="st">&quot;saturday&quot;</span>)]</span>
<span id="cb4-63"><a href="#cb4-63" tabindex="-1"></a><span class="co">#&gt;    service_id sunday saturday</span></span>
<span id="cb4-64"><a href="#cb4-64" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;  &lt;int&gt;    &lt;int&gt;</span></span>
<span id="cb4-65"><a href="#cb4-65" tabindex="-1"></a><span class="co">#&gt; 1:        U__      0        0</span></span>
<span id="cb4-66"><a href="#cb4-66" tabindex="-1"></a><span class="co">#&gt; 2:        U__      0        0</span></span></code></pre></div>
<p>Meanwhile, <code>filter_by_time_of_day()</code> takes the beginning
and the end of a time block (the <code>from</code> and <code>to</code>
arguments, respectively) and keeps the entries related to trips that run
within the specified block. Please note that the function works a bit
differently depending on whether a trip’s behaviour is described using
the <code>frequencies</code> and the <code>stop_times</code> tables
together or using the <code>stop_times</code> table alone: the
<code>stop_times</code> entries of trips described in
<code>frequencies</code> should not be filtered, because they are just
“templates” that describe how long it takes from one stop to another
(i.e. the departure and arrival times listed there should not be
considered “as is”). Let’s see what that means with an example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_time_of_day</span>(gtfs, <span class="at">from =</span> <span class="st">&quot;05:00:00&quot;</span>, <span class="at">to =</span> <span class="st">&quot;06:00:00&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">head</span>(smaller_gtfs<span class="sc">$</span>frequencies)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co">#&gt;       trip_id start_time end_time headway_secs</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;     &lt;char&gt;   &lt;char&gt;        &lt;int&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt; 1: CPTM L07-0   05:00:00 05:59:00          360</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt; 2: CPTM L07-1   05:00:00 05:59:00          360</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">#&gt; 3: CPTM L08-0   05:00:00 05:59:00          480</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">#&gt; 4: CPTM L08-1   05:00:00 05:59:00          480</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt; 5: CPTM L09-0   05:00:00 05:59:00          480</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt; 6: CPTM L09-1   05:00:00 05:59:00          480</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co"># stop_times entries are preserved because they should be interpreted as</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co"># &quot;templates&quot;</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="fu">head</span>(smaller_gtfs<span class="sc">$</span>stop_times[, <span class="fu">c</span>(<span class="st">&quot;trip_id&quot;</span>, <span class="st">&quot;departure_time&quot;</span>, <span class="st">&quot;arrival_time&quot;</span>)])</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt;       trip_id departure_time arrival_time</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;         &lt;char&gt;       &lt;char&gt;</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#&gt; 1: CPTM L07-0       04:00:00     04:00:00</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">#&gt; 2: CPTM L07-0       04:08:00     04:08:00</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">#&gt; 3: CPTM L07-0       04:16:00     04:16:00</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="co">#&gt; 4: CPTM L07-0       04:24:00     04:24:00</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="co">#&gt; 5: CPTM L07-0       04:32:00     04:32:00</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a><span class="co">#&gt; 6: CPTM L07-0       04:40:00     04:40:00</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="co"># had the feed not had a frequencies table, the stop_times table would be</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a><span class="co"># adjusted</span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a>frequencies <span class="ot">&lt;-</span> gtfs<span class="sc">$</span>frequencies</span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a>gtfs<span class="sc">$</span>frequencies <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_time_of_day</span>(gtfs, <span class="at">from =</span> <span class="st">&quot;05:00:00&quot;</span>, <span class="at">to =</span> <span class="st">&quot;06:00:00&quot;</span>)</span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a><span class="fu">head</span>(smaller_gtfs<span class="sc">$</span>stop_times[, <span class="fu">c</span>(<span class="st">&quot;trip_id&quot;</span>, <span class="st">&quot;departure_time&quot;</span>, <span class="st">&quot;arrival_time&quot;</span>)])</span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a><span class="co">#&gt;       trip_id departure_time arrival_time</span></span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;         &lt;char&gt;       &lt;char&gt;</span></span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a><span class="co">#&gt; 1: CPTM L07-0       05:04:00     05:04:00</span></span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a><span class="co">#&gt; 2: CPTM L07-0       05:12:00     05:12:00</span></span>
<span id="cb5-36"><a href="#cb5-36" tabindex="-1"></a><span class="co">#&gt; 3: CPTM L07-0       05:20:00     05:20:00</span></span>
<span id="cb5-37"><a href="#cb5-37" tabindex="-1"></a><span class="co">#&gt; 4: CPTM L07-0       05:28:00     05:28:00</span></span>
<span id="cb5-38"><a href="#cb5-38" tabindex="-1"></a><span class="co">#&gt; 5: CPTM L07-0       05:36:00     05:36:00</span></span>
<span id="cb5-39"><a href="#cb5-39" tabindex="-1"></a><span class="co">#&gt; 6: CPTM L07-0       05:44:00     05:44:00</span></span></code></pre></div>
<p>When filtering the <code>stop_times</code> table, we have two
options. We either keep entire trips that cross the specified time
block, or we keep only the trip segments within this block (default
behaviour). To control this behaviour you can use the
<code>full_trips</code> parameter:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_time_of_day</span>(</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>    gtfs,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>    <span class="st">&quot;05:00:00&quot;</span>,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>    <span class="st">&quot;06:00:00&quot;</span>,</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="at">full_trips =</span> <span class="cn">TRUE</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co"># CPTM L07-0 trip is kept intact because it crosses the time block</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="fu">head</span>(smaller_gtfs<span class="sc">$</span>stop_times[, <span class="fu">c</span>(<span class="st">&quot;trip_id&quot;</span>, <span class="st">&quot;departure_time&quot;</span>, <span class="st">&quot;arrival_time&quot;</span>)])</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#&gt;       trip_id departure_time arrival_time</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;         &lt;char&gt;       &lt;char&gt;</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt; 1: CPTM L07-0       04:00:00     04:00:00</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt; 2: CPTM L07-0       04:08:00     04:08:00</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt; 3: CPTM L07-0       04:16:00     04:16:00</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; 4: CPTM L07-0       04:24:00     04:24:00</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt; 5: CPTM L07-0       04:32:00     04:32:00</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">#&gt; 6: CPTM L07-0       04:40:00     04:40:00</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="co"># dropping entries related to trips that cross the specified time block</span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>smaller_gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_time_of_day</span>(</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a>    gtfs,</span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>    <span class="st">&quot;05:00:00&quot;</span>,</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>    <span class="st">&quot;06:00:00&quot;</span>,</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a>    <span class="at">full_trips =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>    <span class="at">keep =</span> <span class="cn">FALSE</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>)</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a><span class="co"># CPTM L07-0 trip is gone</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="fu">head</span>(smaller_gtfs<span class="sc">$</span>stop_times[, <span class="fu">c</span>(<span class="st">&quot;trip_id&quot;</span>, <span class="st">&quot;departure_time&quot;</span>, <span class="st">&quot;arrival_time&quot;</span>)])</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a><span class="co">#&gt;       trip_id departure_time arrival_time</span></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="co">#&gt;        &lt;char&gt;         &lt;char&gt;       &lt;char&gt;</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a><span class="co">#&gt; 1: CPTM L09-0       04:00:00     04:00:00</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a><span class="co">#&gt; 2: CPTM L09-0       04:03:00     04:03:00</span></span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a><span class="co">#&gt; 3: CPTM L09-0       04:06:00     04:06:00</span></span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a><span class="co">#&gt; 4: CPTM L09-0       04:09:00     04:09:00</span></span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a><span class="co">#&gt; 5: CPTM L09-0       04:12:00     04:12:00</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a><span class="co">#&gt; 6: CPTM L09-0       04:15:00     04:15:00</span></span></code></pre></div>
<p><code>filter_by_time_of_day()</code> also includes a
<code>update_frequencies</code> argument, used to control whether the
<code>frequencies</code> table should have its <code>start_time</code>
and <code>end_time</code> fields updated to fit inside/outside the
specified time of day. Please read the function documentation to
understand how this argument interacts with the <code>exact_times</code>
field.</p>
</div>
<div id="filtering-using-a-spatial-extent" class="section level1">
<h1>Filtering using a spatial extent</h1>
<p>It’s not uncommon that one wants to analyze only the transit services
of a smaller region contained inside a feed. The
<code>filter_by_sf()</code> function allows you to filter GTFS data
using a given spatial extent. This functions takes a spatial
<code>sf</code>/<code>sfc</code> object (or its bounding box) and
keeps/drops the entries related to shapes and trips selected via a
specified spatial operation. It may sound a bit complicated, but it’s
fairly easy to understand when shown. Let’s create an auxiliary function
to save us some typing:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>plotter <span class="ot">&lt;-</span> <span class="cf">function</span>(gtfs,</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>                    geom,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>                    <span class="at">spatial_operation =</span> sf<span class="sc">::</span>st_intersects,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>                    <span class="at">keep =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>                    <span class="at">do_filter =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="cf">if</span> (do_filter) {</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>    gtfs <span class="ot">&lt;-</span> <span class="fu">filter_by_sf</span>(gtfs, geom, spatial_operation, keep)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>  }</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>  shapes <span class="ot">&lt;-</span> <span class="fu">convert_shapes_to_sf</span>(gtfs)</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>  trips <span class="ot">&lt;-</span> <span class="fu">get_trip_geometry</span>(gtfs, <span class="at">file =</span> <span class="st">&quot;stop_times&quot;</span>)</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>  geom <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_as_sfc</span>(geom)</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> trips) <span class="sc">+</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> shapes) <span class="sc">+</span></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> geom, <span class="at">fill =</span> <span class="cn">NA</span>)</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>}</span></code></pre></div>
<p>This function:</p>
<ul>
<li>Conditionally filters a GTFS object given a spatial object (called
<code>geom</code>);</li>
<li>Generates shapes’ and trips’ geometries as described in their
respective tables;</li>
<li>Generates a polygon from the bounding box;</li>
<li>Plots all the <code>sf</code> objects cited above to show the effect
of each <code>filter_by_sf()</code> argument in the final result.</li>
</ul>
<p>Also, please note that our <code>plotter()</code> function takes the
same arguments of <code>filter_by_sf()</code> (with the exception of
<code>do_filter</code>, which is used to show the unfiltered data), as
well as the same defaults.</p>
<p>Let’s say that we want to filter GTFS data using the bounding box of
the shape <code>68962</code>. Here’s how the unfiltered data looks like,
with the bounding box placed on top of it.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>bbox <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_bbox</span>(<span class="fu">convert_shapes_to_sf</span>(gtfs, <span class="at">shape_id =</span> <span class="st">&quot;68962&quot;</span>))</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="fu">plotter</span>(gtfs, bbox, <span class="at">do_filter =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>By default <code>filter_by_sf()</code> (and <code>plotter()</code>,
consequently) keeps all the data related to the trips and shapes that
intersect the given geometry. Here’s how it looks like:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">plotter</span>(gtfs, bbox)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#&gt; Warning: `filter_by_sf()` was deprecated in gtfstools 1.3.0.</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `filter_by_spatial_extent()` instead.</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">#&gt; ℹ For backwards compatibility reasons, usage of `filter_by_sf()` is still</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">#&gt;   allowed as of the current version, but the function will be removed from the</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt;   package in version 2.0.0.</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Alternatively you can also <em>drop</em> such data:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">plotter</span>(gtfs, bbox, <span class="at">keep =</span> <span class="cn">FALSE</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; Warning: `filter_by_sf()` was deprecated in gtfstools 1.3.0.</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `filter_by_spatial_extent()` instead.</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#&gt; ℹ For backwards compatibility reasons, usage of `filter_by_sf()` is still</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#&gt;   allowed as of the current version, but the function will be removed from the</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt;   package in version 2.0.0.</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>You can also control which spatial operation you want to use to
filter the data. This is how you’d keep the data that is contained
inside the given geometry:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">plotter</span>(gtfs, bbox, <span class="at">spatial_operation =</span> sf<span class="sc">::</span>st_contains)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt; Warning: `filter_by_sf()` was deprecated in gtfstools 1.3.0.</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `filter_by_spatial_extent()` instead.</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co">#&gt; ℹ For backwards compatibility reasons, usage of `filter_by_sf()` is still</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt;   allowed as of the current version, but the function will be removed from the</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co">#&gt;   package in version 2.0.0.</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>And, simultaneously using <code>spatial_operation</code> and
<code>keep</code>, this is how you’d drop the data contained inside the
geometry:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">plotter</span>(gtfs, bbox, <span class="at">spatial_operation =</span> sf<span class="sc">::</span>st_contains, <span class="at">keep =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#&gt; Warning: `filter_by_sf()` was deprecated in gtfstools 1.3.0.</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `filter_by_spatial_extent()` instead.</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">#&gt; ℹ For backwards compatibility reasons, usage of `filter_by_sf()` is still</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">#&gt;   allowed as of the current version, but the function will be removed from the</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt;   package in version 2.0.0.</span></span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAhFBMVEUAAAAzMzNNTU1NTW5NTY5NbqtNjshZWVluTU1uTW5uTY5ubo5ubqtujshuq+SOTU2OTW6OTY6Obk2Obm6ObquOjo6OyP+rbk2rbm6rbo6rjk2ryKuryP+r5OSr5P/Ijk3Ijm7I///kq27kq6vk/+Tk///r6+v/yI7/5Kv//8j//+T////eTC3dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAL1ElEQVR4nO2dCZebNhSFlWkSZ3WaNJ2ZtM0k4zbYY/7//ysgIbTfJwbZLO+ekwzGukZ81gJ6QhY1Kylx7QzMXQwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAhoFqJLq/2ZohOVKHgYEPAwIeBgQ8DAg4GFAwOMBOr25ubmt6+PNzctHc4fS0yf9xjYBPf3+UJ/ePpzePdaH18aOw02r26dPDavDq1/bBXRsqfzoSkwLSe/4t90+/dPta5llARJi+oxfyhNqgxQAWYLUDgXofNeXnvrFixeUdqr78FbDK7WP6p6HjOye7/Z12/T89mDsUIC6xkm/Qf+aOkSi32ws+uXYb/ZSHh/Q06e92lA1qduhAbV/3mZWMaWWifpnABuZ8Ut5PECnN7rLUk1Rt0MB6lok9caIRlqj6SyLBKT4HJumRpYgtUMB6nqx7EY6konMIjQPQKo7b/82TU3Taakd/f72OmhEGxTOxBIBZWl8LhSgLEIbBJRXhLYIKKsMMaCsjF/Kc2VAOZWMAWVl/FKeqwOiE9omoIwitFVAZEIMKCvjl/JcHxC5kjGgrIxfynN9QORxoY0CqsgdGQPKyvilPLMARKtk2wVE7Oo3DIhWyRhQnmfMcUZ4PEBebP5oBOOLxeYphOYByIvNq63CsfnlADq6sXm19azYPCHjBELzANSXotqMzTdbz4rNEzT7UH0iNt9tPTM2j79Z3NXPpQR5sXlzdockNjI2n874UgB5sXm5NU1sPplxRGgegLzYvNoqEZt3hCrZPAB5sXm1VSQ2b2sZgLI0PhcMKD/jsBtjQPmeMcfJ9DAg4JkNoOVcKF4HEGHMbNOAKKOuGweU7xlznHzPXACN8Iw5Tr6HAQHPPACRwhobBsRhH5AJWmh1u4CIsxc2C4hnd4BMMCCQCQYEMsGAQCYYEMjEwuYoepMX2khiyYUFyPOA5wHIm7xQt5GO24KTFxYG6OhPXji9/3Jbl5u8sDBAfSmq9eSF8/33u9uSkxfmPm1BKj554bA/D4BKTF5YWi/mTF44ffhlAaonn7xAnUk+E0Du5AXZOu8LTl4Qixru8CYv1LKbLzl5gfi4xjwA+ZMXJKCSkxcWBShL43PBgHIywYBQJhbVi80cUKTDi33CBgGF31s7IHobFL6qjH7ASgDlNNLBpAxIe7bZBpFDz7HbtvWXIDKg8FvRK6m1ACIRij9ALqJ1bC2AaHzib60fEMEioocR8U9YCSBSE7RlQBRCIgoowWc1gAiVTPQeD2a8BVoVIEBIr//q9WUpPgPUjMV15wkIFKF+gdzASYpKrjEcvAwY7t8EeR2emQJKZb9bY7kKAxLGGsNBQHqvSJa1WN48QF5svh2NHlYWKLjof+I6pwt8RABZWFxQtWWglaI0ID82L2M8F1j0P95GyDPuAAVMwk8aKVO0AFMa0NGNzZ/vuxhG6YUF5MlFUss3IoCS5zzyns98FWiDrNh8W6duisbmtaKLC+g37BT2bwnQDpGfK99px+bbOHNTioovLNB9wZHUQnmEW5uynzGbogQFFhYYnpuve2ZlACVHnOvKbY3zjzNJLzbpwgLx7jeYOrW7NsfLiNd90wMKLixw/vY4NjYfuUKJAUoNqFoDZiODjc/vxaZeWECofDmcAlfS8au9UBs0csoMDZCZKtBI0xXJRSJDQl32e112fzsQqpPCBzR60lX2yFxRQMF2wvxtlkimbEr9Rp3Px78Ogk2Xm2AqQP63nsxLbxGJTPcfIZsbM9XQAKG7dAuQTJg0CCFgNz8WkMVegKv6WqdLnKJ6S2M0ztMshKkzNk7W7gEjAdp2d6m7eWF9r7Ec+xlPJDfapAG4CJxhlFFtpHAO6X6IflluuGP4jsPnG8q446y8/cOZ6GppywQghlpkn2yijNoGL29TAhqOlwsoQciqSaGSEmCmb+ijw7S+PZa3SQFVRkFNKznkarVlfmGhq7fkOYuPKFKys6PLqmK5Ev3lVYZmMeS6i53MsK2KzK6vYOMiFCNK3mwBOV2NerETlTEmnSt3iITmsV7NCZDZEfYd+67vZiaIcY3xzAzQcHMr/+iUIh5ZTWmFgKxGo9nqASVi8wmtDpDbogoxAMpuTKr1AfJv4TQg+g+UmFoZIFH5Vy0DoHoEoXUBCt6o7HRzXVujk7TjrArQcONppZQ3VpUaMBvuLknHKQDIi82f74ZB6Mli89FerHLr2E4O/1Qy7JM7qDg9oGBs/vjq18Sx+SQgO6Xo2+fafotEaHpARzc2//S5Ky8Tx+bzAPVjO3bFGjVqQFBmbP704a+bYU37qWLzu/hbQ7i9Q7MTbeaEfGkH59u3x2chU/HY/Jvb9tHwiWPziRLktDI7oUdeh51DEtChlShB/nPzBRb9JwBSJ77TLXNt7vbTB1WkF7Nj809fTUDZsfmIMKAexE7v0cOnGReM0wPyn5v/YVaxqZ6bjwNya5IHCES2bE0PyI/NN1c+Lx+nfm4+Aaj7T5gpXUAZpWhVV9JS+sJ5SOkDIv+25uoAqZCNnTIAiDr4sTZAXlfejgeJECBK8G1c1uYMyL/USQG6zq3GNQH1YT5rX6SKuekiWgugPrbcbXspY4Cudi92cUDyfl14PZhKGQF0mV+1uz4gIfo5HIEBVwnIvNWoTCc8zioA9X9FqAB1KUPzdqpQYk8rAGTFUgOnvNN7AoeBV9TLB+ROWPBTpgAZI/hhVMsHZCl0kmlAlTWFyH9zZYBChCCgwRtwrw1QoOcmA+rsrn91gHxCu8jkyojd8W8BUJUDyCW0QkD+dVDkZpXkXx8g/1Yjq4q5RXCFgAI3q1mHsQEXiWrYsfl+MFppqtg8XbknWxhQaE37ArH5hCUas6ACMt3TAzr6a9p30C7x3LxSbECeehgTcJk2yF7TXm5c4rl5nZXnRtxLhOzja9pLXhd5bl7peVXM+oQSJch7br6NspZc097T8wHpalakF3Ofm//RAiu4pr2nyBhP3mFig2xYaUB+bF6ublJyTXtXkwCSHzM9oEBsvsNRck17R7FRwuzDiAVfSae7+XxP+IOmeL5jjoCmKkEVA0JaJaBooIIBSU0KKGO2XuQ48wM0pWfEk9LbAjSK0KYArbENmpmHAQEPAwIeBgQ8DAh4GBDwPAuQ0oix6THD2df1MCDgYUDAw4CAZxk/uHxFMSAgBgTEgIAYEBAdkPnLz3U3YUjPZ+hCrsduetFr12KsAXJ6Y/xQR8TieqwVRIgetSPLo6ZH+R46oIP6gC5kL3G97okd9s37f7b/7T2LXAOkloHZg55xFLE4HnsFEaJH7sjyqOlRAQ8Z0On9F1lyZPy5Xdrj9K5f0f304df5/u/2vwfXotYAqdVSBZ/TFtfjrCBC8qgdWR41PSrgoQI633+XxVbNHrIXZmiO9PT1v2+PZi6VRa0BUusSlLJ4HnsFEZpH7cjzyPwFPFRAh72s1+bcmOETG9Snj8030PznWtQaIF0OumYrZfE89goiNI/akeeR06MCHiKgttB1gPpq7iztcbg9NNV5b9ZzZVEJazm96PjyMWEJeOBhgh4DEM2jpkcFPERAsvXaq0lDtdsGNXX4Z9PKffz54FnUGiC1W+hCFt9jryBC86gdWR41/Sfgyevma93UtQWyaY76T3z6o/kyzvfvH33LD11d7BIUtjgeewURokfuyPKo6VEBTyYgVYjl0h5NiegvjM53XTfwOmTp1gBpLUfrlzrCFtdjryBC89jXbCRP37/7Hr6SBmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwIiAEBMSAgBgTEgIAYEBADAmJAQAwI6H9cdRzdQAkfpAAAAABJRU5ErkJggg==" /><!-- --></p>
<p>All filtering functions return a GTFS object readily available to be
manipulated and analyzed using the rest of <strong>gtfstools</strong>’
toolkit. For more information on how to use other functions made
available by the package, please see the <a href="gtfstools.html">introductory vignette</a>.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
